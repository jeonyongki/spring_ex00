<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.ykj.ex00.mappers.BoardMapper">

  <insert id="insert" parameterType="BoardVO">
    <selectKey order="AFTER" keyProperty="bno" resultType="long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into tbl_board (title, content, writer)
    values(#{title},#{content},#{writer})
  </insert>

  <select id="getList" resultType="BoardVO">
    select * from tbl_board where bno > 0 order by bno desc
  </select>

  <select id="select" resultType="BoardVO">
    select * from tbl_board where bno = #{bno}
  </select>

  <update id="update" parameterType="BoardVO">
    update tbl_board set title=#{title}, content=#{content}, updateDate=now()
    where bno = #{bno}
  </update>

<!--  parameterType 자동주입후 getSkip, getAmount 호출 -->
  <select id="getPage" resultType="BoardVO">
    select * from tbl_board where bno > 0 order by bno desc
    limit #{skip}, #{amount}
  </select>

  <select id="getTotalCnt" resultType="int">
    select count(bno) from tbl_board
  </select>
</mapper>